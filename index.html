<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Parador de Playa | MenÃº Digital â€“ Restaurante en la Costa</title>
  <meta name="description" content="MenÃº digital del parador de playa. Desayunos, almuerzos, meriendas, pescados, minutas, jugos detox y postres frente al mar." />
  <meta name="keywords" content="parador de playa, restaurante en la costa, menÃº digital, comida casera, pescados, minutas, jugos detox" />
  <link rel="stylesheet" href="styles.css" />
 

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>

<header>
  <div class="header-inner">
    <div class="hero"></div>
    <img class="logo" alt="Logo">
    <h1>Parador de Playa</h1>
    <p>Comida casera, pescados frescos y tragos frente al mar.</p>
  </div>
</header>

<main>
<section class="categories" id="categories"></section>


  <!-- BotÃ³n flotante volver arriba -->
  <button id="backToCategories" aria-label="Volver a categorÃ­as">â†‘</button>

<section class="menu-grid" id="menu"></section>


</main>

<footer class="footer">
  <p>
    <strong>Parador de Playa</strong> Â· MenÃº digital optimizado para buscadores
  </p>

  <a
   id="instagram-link"
    href="https://www.instagram.com/TU_USUARIO"
    target="_blank"
    rel="noopener"
    class="instagram-link"
    aria-label="Seguinos en Instagram"
  >
    <i class="fa-brands fa-instagram"></i>
    Seguinos en Instagram
  </a>
</footer>
<script src="script.js"></script>

<script>
function renderCategories(data) {
  const container = document.getElementById("categories");
  if (!container) return;

  container.innerHTML = "";

  // Construimos mapa categoria â†’ orden
  const categoryMap = {};

  data.forEach(item => {
    if (!item.categoria) return;

    const cat = item.categoria.toLowerCase().trim();
    const order = parseInt(item.orden_categoria, 10);

    if (!categoryMap[cat]) {
      categoryMap[cat] = {
        key: cat,
        order: isNaN(order) ? 999 : order
      };
    }
  });

  // Convertimos a array y ordenamos
  let categories = Object.values(categoryMap)
    .sort((a, b) => a.order - b.order);

  // ðŸ”’ contacto SIEMPRE al final
  if (CATEGORY_PRESET.contacto) {
    categories.push({
      key: "contacto",
      order: 9999
    });
  }

  categories.forEach((catObj, index) => {
    const preset = CATEGORY_PRESET[catObj.key];
    if (!preset) return;

    const btn = document.createElement("div");
    btn.className = "cat-btn";
    if (index === 0) btn.classList.add("active");

    btn.dataset.cat = catObj.key;
    btn.innerHTML = `
      <i class="fa-solid ${preset.icon}"></i>
      <span>${preset.label}</span>
    `;

    container.appendChild(btn);
  });
}



const SHEET_URL =
  "https://docs.google.com/spreadsheets/d/1S4x8FEcl0-o6eUy3LxKaeD1iRSxpIqqricd8fbpp_S8/export?format=csv&gid=0";

const menu = document.getElementById("menu");
  // categorias del menu dinamico
const CATEGORY_PRESET = {
  bebidas: { label: "Bebidas", icon: "fa-bottle-water" },
  desayunos: { label: "Desayunos y Meriendas", icon: "fa-mug-hot" },
  almuerzos: { label: "Sandwichs y Hamburguesas", icon: "fa-burger" },
  picar: { label: "Para Picar", icon: "fa-utensils" },
  postres: { label: "Postres", icon: "fa-ice-cream" },
  promociones: { label: "Promociones", icon: "fa-store" },
  cafeteria: { label: "CafeterÃ­a", icon: "fa-mug-saucer" },
  pescados: { label: "Pescados y Mariscos", icon: "fa-fish" },
  minutas: { label: "Minutas", icon: "fa-plate-wheat" },
  jugos: { label: "Jugos Detox", icon: "fa-lemon" },
  del_dia: { label: "MenÃº del dia ðŸ”¥", icon: "fa-utensils " },
  contacto: {
  label: "Reservas / Contacto",
  icon: "fa-phone",
  type: "contact"
},};  



fetch(SHEET_URL)
  .then(res => res.text())
  .then(csv => {
    const lines = csv.trim().split("\n");
    const headers = lines[0].split(",");

    const data = lines.slice(1).map(line => {
      const values = line.split(",");
      return Object.fromEntries(
        headers.map((h, i) => [h.trim(), values[i]?.trim()])
      );
    });

    console.log("DATA OK:", data);

    renderCards(data);
    renderCategories(data);
    initCategoryFilter();
  })
  .catch(err => console.error("ERROR:", err));

function renderCards(data)  {
  menu.innerHTML = ""; // ðŸ”¥ limpiamos todo

  data.forEach(item => {
    if (item.activo !== "si") return;

    const card = document.createElement("div");
    card.className = "card";
    card.dataset.cat = item.categoria
  .toLowerCase()
  .trim();


    const imgSrc =
      item.imagen && item.imagen !== ""
        ? item.imagen
        : "https://via.placeholder.com/400x300?text=Sin+imagen";

    card.innerHTML = `
      <img src="${imgSrc}" alt="${item.nombre}">
      <div class="card-content">
        <h3>${item.nombre}</h3>
        <p>${item.descripcion}</p>
        <div class="price">$${item.precio}</div>
      </div>
    `;

    menu.appendChild(card);
  });

      initCategoryFilter();
 // ðŸ‘ˆ importante
}

function initCategoryFilter() {
  const buttons = document.querySelectorAll(".cat-btn");

  buttons.forEach(button => {
    button.addEventListener("click", () => {
      // estado activo
      buttons.forEach(b => b.classList.remove("active"));
      button.classList.add("active");

      const category = button.dataset.cat;

      document.querySelectorAll(".contact-card").forEach(card => card.remove());

document.querySelectorAll(".card").forEach(card => {
  card.style.display = "none";
});

      // ðŸ‘‰ CASO CONTACTO
      if (category === "contacto") {
     // ocultamos productos
      document.querySelectorAll(".card:not(.contact-card)").forEach(card => {
      card.style.display = "none";
       });

  // eliminamos contactos previos (por si vuelve a tocar)
  document.querySelectorAll(".contact-card").forEach(card => card.remove());

  // renderizamos contacto
  renderContactCards(window.CONFIG);

  return;
}



      // ðŸ‘‰ CASO NORMAL (productos)
      const cards = document.querySelectorAll(".card");
      let firstVisibleCard = null;

      cards.forEach(card => {
        const match = card.dataset.cat === category;
        card.style.display = match ? "block" : "none";

        if (match && !firstVisibleCard) {
          firstVisibleCard = card;
        }
      });

      if (firstVisibleCard) {
        firstVisibleCard.scrollIntoView({
          behavior: "smooth",
          block: "start"
        });
      }
    });
  });
}

function renderContactCards(config) {
  const menu = document.getElementById("menu");

  const contacts = [
    {
      title: "WhatsApp",
      desc: "Reservas y/o consulta directa",
      href: config.whatsapp_url,
      img: config.whatsapp_img,
      icon: "fa-whatsapp",
      btn: "Abrir WhatsApp"
    },
    {
      title: "Instagram",
      desc: "Seguinos y escribinos",
      href: config.instagram_url,
      img: config.instagram_img,
      icon: "fa-instagram",
      btn: "Ver Instagram"
    }
  ];

  contacts.forEach(c => {
    if (!c.href) return;

    const card = document.createElement("div");
    card.className = "card contact-card";

    card.innerHTML = `
      <img src="${c.img}" alt="${c.title}">
      <div class="card-content">
        <h3><i class="fa-brands ${c.icon}"></i> ${c.title}</h3>
        <p>${c.desc}</p>
        <a href="${c.href}" target="_blank" class="contact-btn">
          ${c.btn}
        </a>
      </div>
    `;

    menu.appendChild(card); // ðŸ‘ˆ SIEMPRE AL FINAL
  });
}


</script>



</body>
</html>
